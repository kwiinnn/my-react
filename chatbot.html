<!DOCTYPE html>
<html>
	<head>
	<title>Chatbot</title>
	</head>
	<body>
	<div class="js-container"></div>

	<script src="react-basics.js"></script>

	<script src="https://unpkg.com/supersimpledev/react.js"></script>
	<script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

	<script src="https://unpkg.com/supersimpledev/babel.js"></script>
	<script type="text/babel">

		function ChatInput() {
			return (
			<>
				<input 
					placeholder="Send a message to Cha" 
					size="20"
				/>
				<button>Send</button>
			</>
			);
		}

		function ChatMessage( { message, sender } ) {
			return (
				<div>
					{sender === 'robot' && (
						<img src="assets/cha.png" width="50px"/>
					)}
					{message}
					{sender === 'user' && (
						<img src="assets/user.png" width="50px"/>
					)}
				</div>
			);
		}

    function ChatMessages () {

      const array = React.useState([{
				message: 'hello, cha',
				sender: 'user',
        id: 'id1'
			}, {
				message: 'hi',
				sender: 'robot',
        id: 'id2'
			}, {
        message: "i'm sorry, i messed up",
        sender: 'user',
        id: 'id3'
      }, {
        message: "it's fine",
        sender: 'robot',
        id: 'id4'
      }]);
      const chatMessages = array[0];
      const setChatMessages = array[1];

      function sendMessage() {
        setChatMessages([
          ...chatMessages, 
          {
            message: 'imy',
            sender: 'user',
            id: crypto.randomUUID()
          }
        ]);
      }

      return (
      <>
      <button onClick = {sendMessage} >Send message</button>
        {chatMessages.map((chatMessage) => {
          return (
            <ChatMessage 
              message = {chatMessage.message}
              sender = {chatMessage.sender}
              key = {chatMessage.id}
            />
          );
        })}
      </>
      );

    }

		function App () {
			return (
				<>
          <ChatInput />
          <ChatMessages />
					
				</>
			);
		}
		
		const container = document.querySelector('.js-container');
		ReactDOM.createRoot(container).render(<App/>);
	</script>
	</body>
</html>